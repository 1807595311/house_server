"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[305],{6305:function(t,s,i){i.r(s),i.d(s,{default:function(){return _}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"my-consult"},[s("div",{staticClass:"container d_f j_c_sb"},[s("div",{staticClass:"left"},[s("div",{staticClass:"title"},[t._v(t._s(0===t.customer_type?"已发送":"已接收"))]),t.consultList.length>0?s("div",[t._l(t.consultList,(function(i,e){return s("div",{key:i.id,staticClass:"item d_f a_l_c",style:t.activeIndex==e?"background: #eee;":"",on:{click:function(s){return t.changeIndex(e,i.id)}}},[s("div",{staticClass:"head-img"},[s("img",{attrs:{src:i.head_img,alt:""}})]),s("div",{staticClass:"m_l_2",staticStyle:{width:"80%"}},[s("p",{staticClass:"d_f j_c_sb"},[s("span",[t._v(t._s(i.nickname))]),s("Poptip",{directives:[{name:"show",rawName:"v-show",value:t.activeIndex===e,expression:"activeIndex === index"}],attrs:{trigger:"hover",placement:"bottom-start"},model:{value:t.poptip,callback:function(s){t.poptip=s},expression:"poptip"}},[s("span",{staticClass:"f_w"},[t._v("···")]),s("div",{staticClass:"text_a_c",attrs:{slot:"title"},slot:"title"},[t._v("删除咨询？")]),s("div",{attrs:{slot:"content"},slot:"content"},[s("Button",{attrs:{type:"error",long:""},on:{click:function(s){return s.stopPropagation(),t.deleteConsult(i)}}},[t._v("删除")])],1)])],1),s("p",[t._v(t._s(i.mechanism_name||""))]),s("p",{staticClass:"time d_f j_c_sb"},[s("span",[t._v(t._s(i.create_time))]),0===i.read?s("span",{staticStyle:{color:"#e4393c"}},[t._v("未读")]):t._e(),1===i.read?s("span",[t._v("已读")]):t._e()])])])})),s("div",{staticClass:"empty"},[t._v("已加载全部")])],2):s("div",{staticClass:"item"},[s("p",{staticClass:"empty"},[t._v("暂无数据")])])]),s("div",{staticClass:"right"},["{}"!==JSON.stringify(t.consultDetails)?s("div",{staticClass:"container"},[s("div",{staticClass:"head-img"},[s("img",{attrs:{src:t.consultDetails.head_img,alt:""}})]),s("div",{staticClass:"info"},[s("p",[t._v(t._s(t.consultDetails.nickname))]),t.consultDetails.mechanism_name?s("Tag",{attrs:{color:"blue"}},[t._v(t._s(t.consultDetails.mechanism_name))]):t._e()],1),s("div",{staticClass:"other-data"},[s("div",{staticClass:"item"},[s("p",[t._v("所在城市：")]),s("p",[t._v(t._s(t.consultDetails.city))])]),s("div",{staticClass:"item"},[s("p",[t._v("装修风格：")]),s("p",[t._v(t._s(t.consultDetails.style))])]),s("div",{staticClass:"item"},[s("p",[t._v("房屋面积：")]),s("p",[t._v(t._s(t.consultDetails.area)+" m²")])]),s("div",{staticClass:"item"},[s("p",[t._v("房屋现状：")]),s("p",[t._v(t._s(t.consultDetails.situation))])]),s("div",{staticClass:"item"},[s("p",[t._v("装修预算：")]),s("p",[t._v(t._s(t.consultDetails.budget)+" 万元")])]),s("div",{staticClass:"item"},[s("p",[t._v("计划入住时间：")]),s("p",[t._v(t._s(t.consultDetails.planned_time))])]),s("div",{staticClass:"item"},[s("p",[t._v("手机号：")]),s("p",[t._v(t._s(t.consultDetails.phone_number))])]),s("div",{staticClass:"item"},[s("p",[t._v("微信号：")]),s("p",[t._v(t._s(t.consultDetails.wx_number))])]),s("div",{staticClass:"item"},[s("p",[t._v("QQ号：")]),s("p",[t._v(t._s(t.consultDetails.qq_number))])])])]):s("div",[s("p",{staticClass:"empty"},[t._v("暂无数据")])])])])])},a=[],l={name:"MyConsult",data(){return{formInline:{},activeIndex:-1,consultList:[],consultDetails:{},customer_type:this.$store.state.userInfo&&Number(this.$store.state.userInfo.customer_type),poptip:!1}},created(){this.getMyConsult()},methods:{async getMyConsult(){let t=await this.$http.get("/client/my_consult");this.consultList=t.data.data},async changeIndex(t,s){if(this.activeIndex=t,this.consultDetails=this.consultList[t],1===this.customer_type&&0===this.consultDetails.read){let t=await this.$http.post("/client/edit_consult_read",{id:s});2===t.data.status&&this.getMyConsult()}},deleteConsult(t){this.$Modal.confirm({title:"删除咨询",content:"<h3>删除该咨询将不可恢复，确定要删除吗？</h3>",onOk:async()=>{let s=await this.$http.post("/client/delete_consult",{id:t.id});0===s.data.status&&(this.getMyConsult(),this.consultDetails={})}})}}},n=l,c=i(1001),o=(0,c.Z)(n,e,a,!1,null,"7ba56b66",null),_=o.exports}}]);
//# sourceMappingURL=305.50b4f216.js.map
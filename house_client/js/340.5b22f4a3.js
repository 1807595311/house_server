"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[340],{6971:function(t,s,n){n.d(s,{Z:function(){return r}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"dynamic"},[s("div",{staticClass:"box d_f"},[s("div",{staticClass:"item",on:{click:function(s){return t.toDetail(t.dynamic.id)}}},[s("div",{staticClass:"item-img"},[s("img",{attrs:{src:t.dynamic.cover,alt:""}})]),s("div",{staticClass:"item-title"},[s("p",[t._v(t._s(t.dynamic.title))]),s("div",{staticClass:"icon"},[s("div",{staticClass:"icon-box"},[t._t("del"),t._t("edit"),t._t("up"),t._t("down")],2),s("div",{staticClass:"icon-box"},[s("Icon",{attrs:{size:"20",color:"#C6C6C6",type:"eye"}}),s("div",{staticClass:"count"},[t._v(t._s(t.dynamic.views))])],1)])])])])])},a=[],i=(n(7658),{name:"ClientDynamic",props:["dynamic"],data(){return{}},mounted(){},methods:{toDetail(t){this.$router.push({path:"/dynamic_details",query:{id:t}})}}}),o=i,c=n(1001),u=(0,c.Z)(o,e,a,!1,null,"751c8a00",null),r=u.exports},1024:function(t,s,n){n.d(s,{Z:function(){return r}});var e=function(){var t=this,s=t._self._c;return s("div",[t.count>t.listLength?s("div",{staticClass:"more"},[s("Button",{staticClass:"btn",attrs:{type:"text"},on:{click:t.more}},[t._v("加载更多")])],1):s("div",{staticClass:"scroll"},[t._v("已加载全部")])])},a=[],i={name:"LoadingMore",props:["count","listLength"],data(){return{}},methods:{more(){this.$emit("nextPage")}}},o=i,c=n(1001),u=(0,c.Z)(o,e,a,!1,null,"13525c32",null),r=u.exports},2340:function(t,s,n){n.r(s),n.d(s,{default:function(){return _}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"UserHome"},[s("div",{staticClass:"personCenterBg"},[s("div",{staticClass:"headimg"},[1==t.userInfo.state?s("img",{attrs:{src:t.userInfo.head_img,alt:""}}):s("img",{attrs:{src:n(856),alt:""}})]),t.showFollowsBtn?s("div",{staticClass:"d_f j_c_c"},[s("Button",{attrs:{type:"ghost"},on:{click:t.follow}},[s("Icon",{attrs:{size:"16",color:t.userInfo.is_follows?"#0058A3":"",type:t.userInfo.is_follows?"checkmark-round":"plus-round"}}),t._v(" "+t._s(t.userInfo.is_follows?"取消关注":"关注")+" ")],1)],1):t._e(),t.showConsultBtn?s("div",{staticClass:"d_f j_c_c m_t_10"},[s("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"info"},on:{click:()=>t.consultDialog=!0}},[s("Icon",{attrs:{size:"14",type:"chatbox-working"}}),t._v(" 咨询 ")],1)],1):t._e(),1==t.userInfo.state?s("div",[s("p",{staticClass:"title"},[t._v(t._s(t.userInfo.nickname))]),t.userInfo.mechanism_name?s("div",{staticClass:"d_f j_c_c",staticStyle:{"padding-top":"10px"}},[s("Tag",{attrs:{color:"blue"}},[t._v(t._s(t.userInfo.mechanism_name))])],1):t._e(),s("p",{staticClass:"d_f j_c_c",staticStyle:{"padding-top":"10px",color:"#fff","font-size":"14px"}},[t._v(" "+t._s(t.userInfo.city)+" "+t._s(t.userInfo.establish_time)+" ")]),s("p",{staticClass:"followCount"},[s("span",[t._v(t._s(t.userInfo.dynamic_count)+" 作品")]),s("strong",[t._v("|")]),s("span",[t._v(t._s(t.userInfo.follows_count)+" 粉丝")])]),s("p",{staticClass:"introduce"},[t._v(" "+t._s(t.userInfo.introduce)+" ")])]):s("div",[s("p",{staticClass:"title"},[t._v("用户已注销")])])]),s("div",{staticClass:"d_f con j_c_sb"},[s("Menu",{attrs:{theme:"light","active-name":t.activeName},on:{"on-select":t.changeMenu}},[s("Menu-item",{attrs:{name:"dynamicList"}},[s("Icon",{attrs:{type:"document-text"}}),t._v(" 动态 ")],1),t.dataList.fabulousList.length?s("Menu-item",{attrs:{name:"fabulousList"}},[s("Icon",{attrs:{type:"heart"}}),t._v(" 点赞 ")],1):t._e()],1),"dynamicList"===t.activeName?s("div",[s("div",{staticClass:"container"},t._l(t.dataList.dynamicList,(function(t){return s("Dynamic",{key:t.id,attrs:{dynamic:t}})})),1)]):t._e(),"fabulousList"===t.activeName?s("div",[s("div",{staticClass:"container"},t._l(t.dataList.fabulousList,(function(t){return s("Dynamic",{key:t.id,attrs:{dynamic:t}})})),1)]):t._e()],1),s("LoadingMore",{attrs:{count:t.count,listLength:t.dataList[t.activeName].length},on:{nextPage:t.nextPage}}),s("Consult",{attrs:{consultDialog:t.consultDialog},on:{sendConsult:t.sendConsult}})],1)},a=[],i=(n(7658),n(6971)),o=n(4454),c=n(1024),u={name:"UserHome",components:{Dynamic:i.Z,Consult:o.Z,LoadingMore:c.Z},data(){return{account_number:"",userInfo:{},loginUserInfo:this.$store.state.userInfo?this.$store.state.userInfo:{},consultDialog:!1,currentPage:1,count:0,activeName:"dynamicList",dataList:{dynamicList:[],fabulousList:[]}}},created(){this.account_number=this.$route.query.account_number,this.getUserInfo(),this.getFabulous()},computed:{showConsultBtn(){return"1"===this.userInfo.customer_type&&this.account_number!=this.loginUserInfo.account_number&&"0"===this.loginUserInfo.customer_type},showFollowsBtn(){return this.loginUserInfo.account_number&&this.account_number!=this.loginUserInfo.account_number&&this.userInfo.customer_type!=this.loginUserInfo.customer_type}},methods:{async changeMenu(t){this.activeName=t,this.currentPage=1},async nextPage(){this.currentPage++,"dynamicList"==this.activeName?this.getUserInfo():this.getFabulous()},async getUserInfo(){let t=await this.$http.post("/client/find_other_userinfo",{account_number:this.account_number,currentPage:this.currentPage}),s=t.data.data;this.userInfo=s.userInfo,this.count=t.data.count,s.dynamicList.forEach((t=>this.dataList.dynamicList.push(t)));let n=new Map;for(let e of this.dataList.dynamicList)n.set(e.id,e);this.dataList.dynamicList=[...n.values()]},async getFabulous(){if(this.$store.state.userInfo&&this.$store.state.userInfo.account_number){let t=await this.$http.post("/client/find_other_user_fabulous",{account_number:this.account_number,currentPage:this.currentPage}),s=t.data.data;this.count=t.data.count,s.forEach((t=>this.dataList.fabulousList.push(t)))}},async follow(){let t={f_account_number:this.userInfo.account_number};await this.$http.post("/client/user_follow",t),this.getUserInfo()},close(){this.consultDialog=!1},async sendConsult(t){let s={...t,to_account_number:this.account_number},n=await this.$http.post("/client/send_consult",s);0===n.data.status&&(this.consultDialog=!1)}}},r=u,l=n(1001),d=(0,l.Z)(r,e,a,!1,null,"543767e7",null),_=d.exports}}]);
//# sourceMappingURL=340.5b22f4a3.js.map
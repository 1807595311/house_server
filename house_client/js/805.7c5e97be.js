"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[805],{144:function(t,e,n){n.d(e,{Z:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment"},[e("div",{staticClass:"left-box"},[e("img",{attrs:{src:t.comment.head_img,alt:""},on:{click:function(e){return t.toUserHome(t.comment)}}})]),e("div",{staticClass:"right-box"},[e("div",{staticClass:"comment-top"},[e("div",[e("a",[t._v(t._s(t.comment.f_nickname))]),t.author==t.comment.account_number?e("span",{staticClass:"comment-author"},[t._v("作者")]):t.loginAccount==t.comment.account_number?e("span",{staticClass:"comment-self"},[t._v("自己")]):t._e(),e("strong"),e("span",[t._v(t._s(t.comment.create_time))])]),t.isDelete?t._e():e("div",{staticClass:"reply"},[t.selfCommentDelete?e("span",{staticClass:"m_r_10 com_btn",on:{click:function(e){return t.deleteComment(t.comment.id)}}},[t._v("删除")]):t._e(),e("span",{staticClass:"com_btn",on:{click:function(e){return t.replys(t.comment)}}},[t._v(t._s(t.inputReplays?"收起":"回复"))])]),t.isDelete?e("div",{staticClass:"reply",on:{click:function(e){return t.deleteComment(t.comment.id)}}},[t._v("删除")]):t._e()]),e("div",{staticClass:"comment-content"},[t._v(t._s(t.comment.content))]),e("Input",{directives:[{name:"show",rawName:"v-show",value:t.inputReplays,expression:"inputReplays"}],attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"请输入回复内容（限50字）"},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.inputReplays,expression:"inputReplays"}],staticClass:"reply-btn"},[e("Button",{attrs:{type:"primary"},on:{click:t.sendReply}},[t._v("回复")])],1),t._l(t.comment.children,(function(n){return e("div",{key:n.id},[e("div",{staticClass:"comment-top comment-top-reply"},[e("div",{staticClass:"comment-reply"},[e("div",{staticClass:"left-box"},[e("img",{attrs:{src:n.head_img,alt:""},on:{click:function(e){return t.toUserHome(n)}}})]),e("span",[t._v(" "+t._s(n.f_nickname)+" "),t.author==n.account_number?e("span",{staticClass:"comment-author"},[t._v("作者")]):t.loginAccount==n.account_number?e("span",{staticClass:"comment-self"},[t._v("自己")]):t._e(),e("span",{staticClass:"span-reply"},[t._v("回复")]),t._v(" "+t._s(n.t_nickname)+" "),t.author==n.to_account_number?e("span",{staticClass:"comment-author"},[t._v("作者")]):t.loginAccount==n.to_account_number?e("span",{staticClass:"comment-self"},[t._v("自己")]):t._e()]),e("strong"),e("span",[t._v(t._s(n.create_time))])]),e("div",{staticClass:"reply"},[n.account_number===t.loginAccount?e("span",{staticClass:"m_r_10 com_btn",on:{click:function(e){return t.deleteComment(n.id)}}},[t._v("删除")]):t._e(),e("span",{staticClass:"com_btn",on:{click:function(e){return t.reply(n)}}},[t._v(t._s(t.inputReplay&&t.replyId==n.id?"收起":"回复"))])])]),e("div",{staticClass:"comment-content"},[t._v(t._s(n.content))]),e("Input",{directives:[{name:"show",rawName:"v-show",value:t.inputReplay&&t.replyId==n.id,expression:"inputReplay && replyId==v.id"}],attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:"请输入回复内容（限50字）"},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.inputReplay&&t.replyId==n.id,expression:"inputReplay && replyId==v.id"}],staticClass:"reply-btn"},[e("Button",{attrs:{type:"primary"},on:{click:t.sendReply}},[t._v("回复")])],1)],1)}))],2)])},a=[],o=(n(7658),n(5756)),i={name:"Comment",props:{comment:{type:Object},author:{type:String},isDelete:{type:Boolean,default:!1}},data(){return{inputReplay:!1,inputReplays:!1,replyId:null,replyInfo:{},replyContent:"",loginAccount:this.$store.state.userInfo.account_number}},watch:{inputReplay(t){!1===t&&(this.replyContent="")},inputReplays(t){!1===t&&(this.replyContent="")}},computed:{selfCommentDelete(){return this.loginAccount===this.comment.account_number}},methods:{async sendReply(){if(""==this.replyContent)return this.$Message.error("请输入内容后再发送...");if((0,o.o)(this.replyContent))return this.$Message.error("评论存在敏感词...");try{this.replyInfo={...this.replyInfo,content:this.replyContent};let t=await this.$http.post("/client/dynamic_comment_reply",this.replyInfo);0===t.data.status&&(this.$emit("refreshComment"),this.replyContent="",this.inputReplay=!1,this.inputReplays=!1)}catch(t){}},replys(t){this.replyInfo={dynamic_id:t.dynamic_id,account_number:this.$store.state.userInfo.account_number,a_id:t.id,p_id:t.id,to_account_number:t.account_number},this.inputReplays=!this.inputReplays},reply(t){this.replyInfo={dynamic_id:t.dynamic_id,account_number:this.$store.state.userInfo.account_number,a_id:t.a_id,p_id:t.p_id,to_account_number:t.account_number},this.replyId=t.id,this.inputReplay=!this.inputReplay},deleteComment(t){this.$Modal.confirm({title:"删除体提醒",content:"确定要删除该评论吗？",onOk:()=>{try{this.$http.post("/client/delete_comment",{id:t}).then((t=>{this.$emit("refreshComment")}))}catch(e){}}})},toUserHome(t){let e=t.account_number;e!=this.loginAccount&&this.$router.push({path:"/user_home",query:{account_number:e}})}}},c=i,r=n(1001),l=(0,r.Z)(c,s,a,!1,null,"5171c3d7",null),m=l.exports},4915:function(t,e,n){n.d(e,{Z:function(){return l}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"personCenterBg d_f j_c_c a_l_c"},[e("p",{staticClass:"title"},[t._v(t._s(t.title)+" "),e("span",{directives:[{name:"count",rawName:"v-count",value:t.count,expression:"count"}]})])])])},a=[],o={name:"ClientHeadBG",props:{title:{type:String,default:""},count:{type:Number,default:0}},data(){return{}},mounted(){},methods:{},directives:{count:{update(t,e){0===e.value&&(t.style.display="none"),t.innerText=`【${e.value}】`}}}},i=o,c=n(1001),r=(0,c.Z)(i,s,a,!1,null,"66a3848a",null),l=r.exports},1024:function(t,e,n){n.d(e,{Z:function(){return l}});var s=function(){var t=this,e=t._self._c;return e("div",[t.count>t.listLength?e("div",{staticClass:"more"},[e("Button",{staticClass:"btn",attrs:{type:"text"},on:{click:t.more}},[t._v("加载更多")])],1):e("div",{staticClass:"scroll"},[t._v("已加载全部")])])},a=[],o={name:"LoadingMore",props:["count","listLength"],data(){return{}},methods:{more(){this.$emit("nextPage")}}},i=o,c=n(1001),r=(0,c.Z)(i,s,a,!1,null,"13525c32",null),l=r.exports},9805:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment"},[e("HeadBG",{attrs:{title:"我的评论",count:t.count}}),e("div",{staticClass:"d_f sort-box"},[e("span",{staticClass:"label"},[t._v("排序方式：")]),e("Select",{staticClass:"m_r_40",staticStyle:{width:"160px"},attrs:{placeholder:"排序方式"},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}},[e("Option",{attrs:{value:"desc"}},[t._v("评论时间正序")]),e("Option",{attrs:{value:"asc"}},[t._v("评论时间倒序")])],1)],1),e("div",{staticClass:"box"},t._l(t.commentList,(function(n){return e("div",{key:n.id,staticClass:"comment-box",on:{click:function(e){return e.preventDefault(),t.toDynamicDetail(n.dynamic_id)}}},[e("Comment",{attrs:{comment:n,isDelete:!0},on:{refreshComment:t.getMyComment}})],1)})),0),e("LoadingMore",{attrs:{count:t.count,listLength:t.commentList.length},on:{nextPage:function(e){t.currentPage+=1}}})],1)},a=[],o=(n(7658),n(4915)),i=n(144),c=n(1024),r={name:"MyComment",components:{HeadBG:o.Z,Comment:i.Z,LoadingMore:c.Z},data(){return{commentList:[],sort:"desc",currentPage:1,count:0}},created(){this.getMyComment()},watch:{sort(){this.commentList=[],this.getMyComment()},currentPage(){this.getMyComment()}},methods:{async getMyComment(){try{let t=await this.$http.post("/client/my_comment",{sort:this.sort,currentPage:this.currentPage}),e=t.data.data;e.forEach((t=>this.commentList.push(t))),this.count=t.data.count}catch(t){}},toDynamicDetail(t){this.$router.push({path:"/dynamic_details",query:{id:t,open:!0}})}}},l=r,m=n(1001),u=(0,m.Z)(l,s,a,!1,null,"4d38ae3f",null),p=u.exports}}]);
//# sourceMappingURL=805.7c5e97be.js.map
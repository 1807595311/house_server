"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[944],{9944:function(t,e,n){n.r(e),n.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"clientLogin"},[e("div",{staticClass:"box"},[t._m(0),e("div",{staticClass:"box-right"},[e("div",{staticClass:"login"},[e("h1",[t._v("登录")]),e("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline}},[e("Form-item",{attrs:{prop:"account_number"}},[e("Input",{attrs:{size:"large",type:"text",placeholder:"请输入账号"},model:{value:t.formInline.account_number,callback:function(e){t.$set(t.formInline,"account_number",e)},expression:"formInline.account_number"}},[e("Icon",{staticStyle:{width:"20px"},attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),e("Form-item",{attrs:{prop:"password"}},[e("Input",{attrs:{size:"large",type:"password",placeholder:"请输入密码"},model:{value:t.formInline.password,callback:function(e){t.$set(t.formInline,"password",e)},expression:"formInline.password"}},[e("Icon",{staticStyle:{width:"20px"},attrs:{slot:"prepend",type:"ios-unlocked-outline"},slot:"prepend"})],1)],1),e("Form-item",[e("div",{staticClass:"customer_type-box"},[e("Radio-group",{model:{value:t.customer_type,callback:function(e){t.customer_type=e},expression:"customer_type"}},[e("Radio",{attrs:{label:0}},[t._v("普通用户")]),e("Radio",{attrs:{label:1}},[t._v("设计机构")])],1)],1)]),e("Form-item",[e("div",{staticClass:"submit"},[e("Button",{attrs:{type:"primary",long:""},on:{click:function(e){return t.handleSubmit("formInline")}}},[t._v("登录")])],1),e("p",{staticClass:"to-register"},[e("span",{on:{click:function(e){return t.changeRoute("/register_ord")}}},[t._v("注册普通用户")]),e("span",{on:{click:function(e){return t.changeRoute("/register_des")}}},[t._v("注册设计机构")]),e("span",{on:{click:function(e){return t.changeRoute("/")}}},[t._v("暂不注册,先逛逛首页")])])])],1)],1)])])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"box-left"},[e("div",{staticClass:"logo"},[t._v(" 好宜居 ")]),e("div",{staticClass:"content"},[e("h1",[t._v("Hei！")]),e("h1",[t._v("为大众创造更美好的居家生活")])])])}],o=(n(1703),n(7658),{name:"ClientLogin",data(){return{formInline:{account_number:"",password:""},customer_type:0,ruleInline:{account_number:[{validator:this.vAccount_number,trigger:"blur"}],password:[{validator:this.vPassword,trigger:"blur"}]}}},mounted(){},methods:{vAccount_number(t,e,n){let s=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/;s.test(e)?n():n(new Error("账号格式由字母数字长度8-16位组合"))},vPassword(t,e,n){let s=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/;s.test(e)?n():n(new Error("密码格式由字母数字长度8-16位组合"))},async handleSubmit(t){this.$refs[t].validate((async t=>{if(t){let t=null;0==this.customer_type?t=await this.$http.post("/client/login_ord",this.formInline):1==this.customer_type&&(t=await this.$http.post("/client/login_des",this.formInline));let e=t.data;if(0===e.status){let t=e.data.token,n=JSON.stringify(e.data.user_info),s=(new Date).getTime();s+=864e5;let r=new Date(s).toUTCString();document.cookie=`access_token=${t};expires=${r}`,document.cookie=`access_userInfo=${n};expires=${r}`,this.$router.push({path:"/"})}}}))},changeRoute(t){this.$router.push(t)}}}),i=o,a=n(1001),l=(0,a.Z)(i,s,r,!1,null,"b2595f5c",null),c=l.exports}}]);
//# sourceMappingURL=944.54039f13.js.map